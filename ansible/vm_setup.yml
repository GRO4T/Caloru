---
- name: Configure a VM to host a static HTML website
  hosts: webserver
  tasks:

  - name: Check server availability
    ping:

  - name: Install apache
    package:
      name: "{{ apache_package }}"
      state: present
    register: apache_installation
    become: yes

  - name: Enable apache service (start on boot)
    service:
      name: "{{ apache_service }}"
      enabled: yes
    become: yes

  - name: Add HTTP traffic to firewall on machines running Fedora
    firewalld:
      service: http
      permanent: yes
      immediate: yes
      state: enabled
